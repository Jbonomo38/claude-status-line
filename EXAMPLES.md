# Examples

## Different Usage Levels with Checkpoint System

### Low Usage (<60%) - Green
```
Context: 23% (46.0k/200.0k) | In: 2.5k | Out: 1.2k | Cache: 42.3k | S 4.5
```

### Medium Usage (60-80%) - Yellow
```
Context: 67% (134.0k/200.0k) | In: 15.0k | Out: 8.5k | Cache: 110.5k | S 4.5
```

### High Usage (80-85%) - Red with Warning
```
Context: 82% (164.0k/200.0k) | In: 25.0k | Out: 18.5k | Cache: 120.5k | S 4.5 âš ï¸
```

### Checkpoint Requested (85-90%) - Red with Checkpoint Status
```
Context: 87% (174.0k/200.0k) | In: 32.2k | Out: 25.3k | Cache: 116.5k | S 4.5 ðŸ’¾ Creating checkpoint...
Context: 87% (174.0k/200.0k) | In: 32.2k | Out: 25.3k | Cache: 116.5k | S 4.5 âœ… Checkpoint saved at 87%
```

### Safe to Clear (90-95%) - Red with Clear Suggestion
```
Context: 92% (184.0k/200.0k) | In: 45.2k | Out: 23.8k | Cache: 115.0k | S 4.5 âœ… Checkpoint at 87% - Safe to /clear
```

### Urgent (95%+) - Bold Red with Clear Reminder
```
Context: 97% (194.0k/200.0k) | In: 58.5k | Out: 45.2k | Cache: 90.3k | S 4.5 ðŸŸ¢ SAFE TO /clear (Checkpoint at 87%)
```

## Different Models

### Sonnet 4.5
```
Context: 42% (84.0k/200.0k) | In: 12.5k | Out: 8.2k | Cache: 63.3k | S 4.5
```

### Opus 4.6
```
Context: 38% (76.0k/200.0k) | In: 10.0k | Out: 6.0k | Cache: 60.0k | O 4.6
```

### Haiku 4.5
```
Context: 15% (30.0k/200.0k) | In: 5.0k | Out: 2.5k | Cache: 22.5k | H 4.5
```

## Number Formatting Examples

The script automatically formats large numbers for readability:

- **0-999**: Shows as-is â†’ `543`
- **1,000-999,999**: Shows with k suffix â†’ `45.6k`
- **1,000,000+**: Shows with M suffix â†’ `1.2M`

Examples:
```
Context: 5% (10.2k/200.0k) | In: 543 | Out: 287 | Cache: 9.4k | S 4.5
Context: 75% (150.0k/200.0k) | In: 89.3k | Out: 60.7k | Cache: 0 | S 4.5
Context: 99% (198.5k/200.0k) | In: 125.0k | Out: 73.5k | Cache: 0 | S 4.5
```

## What the Metrics Mean

### Input Tokens
Tokens sent to Claude in the current API call. Includes:
- Your message
- System prompts
- Tool definitions

### Output Tokens
Tokens generated by Claude in the current response. Includes:
- Text responses
- Tool calls

### Cache Tokens
Tokens read from prompt cache. This is a good thing! It means:
- Faster responses
- Lower costs
- Efficient context reuse

### Conversation Totals
The percentage and total tokens (e.g., `33.2k/200.0k`) represent the cumulative usage for the **current conversation**. When you run `/clear`, these reset to zero automatically.

## Checkpoint Workflow Example

Here's a typical session showing the checkpoint system in action:

```bash
# Starting fresh conversation
Context: 15% (30.0k/200.0k) | In: 5.2k | Out: 3.1k | Cache: 21.7k | S 4.5

# ... working on your task ...

# Reaching checkpoint threshold
Context: 87% (174.0k/200.0k) | In: 89.5k | Out: 84.5k | Cache: 0 | S 4.5 ðŸ’¾ Creating checkpoint...

# Checkpoint complete
Context: 88% (176.0k/200.0k) | In: 90.1k | Out: 85.9k | Cache: 0 | S 4.5 âœ… Checkpoint saved at 87%

# Reaching clear recommendation
Context: 93% (186.0k/200.0k) | In: 95.2k | Out: 90.8k | Cache: 0 | S 4.5 âœ… Checkpoint at 87% - Safe to /clear

# User runs /clear

# Fresh start!
Context: 2% (4.0k/200.0k) | In: 2.5k | Out: 1.5k | Cache: 0 | S 4.5
```

## Testing the Script

You can test the script with sample JSON:

```bash
echo '{
  "context_window": {
    "used_percentage": 42,
    "context_window_size": 200000,
    "total_input_tokens": 50000,
    "total_output_tokens": 34000,
    "current_usage": {
      "input_tokens": 100,
      "output_tokens": 50,
      "cache_read_input_tokens": 5000
    }
  },
  "model": {
    "display_name": "Sonnet 4.5"
  }
}' | ~/.claude/hooks/status-line.sh
```

Expected output:
```
Context: 42% (84.0k/200.0k) | In: 100 | Out: 50 | Cache: 5.0k | S 4.5
```
